      - name: Merge all PRs in ascending order
        env:
          TOKEN: ${{ secrets.PAT_TOKEN }}
          REPO: ${{ github.repository }}
        run: |
          echo "Fetching PR list..."

          PRS=$(curl -s \
            -H "Authorization: token $TOKEN" \
            -H "Accept: application/vnd.github+json" \
            "https://api.github.com/repos/$REPO/pulls?state=open&per_page=100" \
            | jq -r '.[].number' | sort -n)

          echo "Sorted PRs: $PRS"

          for PR in $PRS; do
            echo "Merging PR #$PR ..."

            curl -s -X PUT \
              -H "Authorization: token $TOKEN" \
              -H "Accept: application/vnd.github+json" \
              "https://api.github.com/repos/$REPO/pulls/$PR/merge" \
              -d '{"merge_method":"squash"}'

            echo "Waiting 10 seconds before next PR..."
            sleep 10
            echo ""
          done
